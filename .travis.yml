sudo: required
language: generic
services:
  - docker
script:
  - travis_wait 120 sleep infinity &
  - git remote add private https://gist.github.com/51893f7d0f8b16d6d8be25073131d4b6.git
  - git fetch private master
  - git rebase private/master
  - git clone https://github.com/aboul3la/Sublist3r.git
  - docker run --rm -ti -v $(pwd):/opt -e "DOMAIN=$DOMAIN" galeksandrp/https-everywhere:docker-httpse2 bash -c "chmod +x ct.sh && ./ct.sh $DOMAIN"
  - docker run --rm -ti -v $(pwd):/opt -e "GITHUB_TOKEN=$GITHUB_TOKEN" -e "TRAVIS_REPO_SLUG=$TRAVIS_REPO_SLUG" -e "TRAVIS_BRANCH=$TRAVIS_BRANCH" -e "DOMAIN=$DOMAIN" galeksandrp/https-everywhere:docker-httpse2 bash -c "test/travis.sh"
branches:
  except:
  - template
  - /^template-.*$/
notifications:
  email: false
  
